!function(e,n,t){"use strict";var o=["#E7302F","#F26091","#FF3B80","#AC41BE","#7E53C5","#5B69C3","#3BA3F8","#18B5F9","#0EC6DC","#19A79A","#63BC66","#9BCE5F","#FFCB00","#FBA900","#FF9900","#FF703A","#8E6E62","#7A5547","#77909D","#536E7B"],r=["adjust","ambulance","anchor","archive","asterisk","balance-scale","bar-chart","barcode","bed","bell","bicycle","birthday-cake","binoculars","bolt","bomb","book","bookmark","briefcase","bug","building","bullhorn","leaf","star","subway","suitcase","tablet","television","thumbs-o-up","thumbs-o-down","ticket","tint","train","tree","trophy","truck","umbrella","user","user-secret","users","video-camera","wheelchair","wrench"];e.module("app").controller("mainController",["$scope","UiHelpers",function(e,t){e.colors=o,e.icons=r,e.model={icon:r[n.random(0,r.length-1)],color:o[n.random(0,o.length-1)]},e.rings={1:".palette",2:".icons"},e.rotateIcon=function(e,n){var o=t.maxDegrees/r.length*e;return n=n||"",{transform:"rotate("+n+o+"deg)"}},e.setIcon=function(n){e.model.icon=r[n]},e.rotateColor=function(e){var n=t.maxDegrees/o.length*e;return{transform:"rotate("+n+"deg)"}},e.setColor=function(n){e.model.color=o[n]},e.wedgie=function(e,n){var o=t.maxDegrees/(n+2),r=.01*o;return{color:e,transform:"translate(-50%, -50%) rotateX("+o+"deg)",width:r+"em"}},window.console.log("icons:",r.length,"\ncolors:",o.length)}]).directive("tap",[function(){return function(e,n,o){var r=new t(n[0],{});r.on("tap",function(){e.$apply(function(){e.$eval(o.tap)})})}}]).directive("pokkaDial",["$document","UiHelpers",function(a,c){return{restrict:"E",replace:!0,scope:{model:"=?",rings:"=?"},template:'<div class="bezel" ng-class="{\'active-touch\': touching}"><div class="crown hour"><span></span></div><div class="crown minute"><span></span></div></div>',link:function(a,s){var i=[];window.console.log(a.rings),n.each(a.rings,function(e,n){i[n]=window.document.querySelector(e)}),window.console.log(a.rings,i);var l={deg:0,max:r.length-1,step:c.maxDegrees/r.length,element:e.element(s[0].querySelector(".minute")),canvas:e.element(i[2])},u={deg:0,max:o.length-1,step:c.maxDegrees/o.length,element:e.element(s[0].querySelector(".hour")),canvas:e.element(i[1])},d,m,f,g,h,p=0,v=0,w,b,D,x=function(e,n,t){var o=e-Math.floor(Math.abs(n+t/2)/t),r=0===o?0:0>e-o?0:e-o>e?e:e-o;return r},E=function(e,t){var o=n.findIndex(t,function(n){return n===e});return c.maxDegrees/t.length*o},y=function(n,t){e.element(n).css({transform:"rotate("+t+"deg)"})},F=function(e,n,t){m=n.length,f=c.maxDegrees/m,d=e.srcEvent&&e.srcEvent.changedTouches?e.srcEvent.changedTouches:e.pointers,p=c.getDegrees(d[0],s[0]),v=t.deg},C=function(e,n){return d=e.srcEvent&&e.srcEvent.changedTouches?e.srcEvent.changedTouches:e.pointers,w=c.getDegrees(d[0],s[0]),b=w-p,D=v+b,D=isNaN(D)?v:D,D=0>=D?c.maxDegrees-Math.abs(D):D,D=D>=c.maxDegrees?D-c.maxDegrees:D,p=w,g=x(m,D,f),v=D,n[g]},k=function(e,n){return h=f*g,n.deg=h,e[g]},B=new t(l.canvas[0],{}),A=new t(u.canvas[0],{}),T={direction:t.DIRECTION_ALL,threshold:0};B.get("pan").set(T),B.on("panstart",function(e){F(e,r,l)}).on("pan panmove",function(e){a.model.icon=C(e,r),y(l.element[0],D),a.$apply()}).on("panend pancancel",function(){a.model.icon=k(r,l),y(l.element[0],h),a.$apply()}),A.get("pan").set(T),A.on("panstart",function(e){F(e,o,u)}).on("pan panmove",function(e){a.model.color=C(e,o),y(u.element[0],D),a.$apply()}).on("panend pancancel",function(){a.model.color=k(o,u),y(u.element[0],h),a.$apply()});var H=function(e,n,t){var o=E(e,t);n.deg=o,y(n.element[0],o)},I=function(){H(a.model.icon,l,r),H(a.model.color,u,o)};I(),a.$watch("model.icon",function(e){H(e,l,r)}),a.$watch("model.color",function(e){H(e,u,o)})}}}]).factory("UiHelpers",[function(){var e=360,n=6.283185307179586,t=function(e){var n={};return e&&(n={t:e.offsetTop,r:e.offsetLeft+e.offsetWidth,b:e.offsetTop+e.offsetHeight,l:e.offsetLeft,w:e.offsetWidth,h:e.offsetHeight},n.cx=n.l+n.w/2,n.cy=n.t+n.h/2),n},o=function(e,o){var r=t(o),a=Math.atan2(e.clientY-r.cy,e.clientX-r.cx);return a+=n/4,0>a&&(a+=n),a},r=function(e,n){var t=o(e,n),r=180*t/Math.PI;return r};return{maxRadians:n,maxDegrees:e,getNumbers:t,getRadians:o,getDegrees:r}}])}(window.angular,window._,window.Hammer);